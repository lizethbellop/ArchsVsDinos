<Window x:Class="ArchsVsDinosClient.Views.MatchViews.MainMatch"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ArchsVsDinosClient.Views.MatchViews"
        mc:Ignorable="d"
        Title="Match" Height="780" Width="1420" ResizeMode="CanResize"
        xmlns:language="clr-namespace:ArchsVsDinosClient.Properties.Langs" xmlns:controls="clr-namespace:ArchsVsDinosClient.Views.MatchViews"
        WindowStartupLocation="CenterScreen" WindowState="Maximized">

    <Window.Background>
        <ImageBrush ImageSource="/Resources/Images/matchBackground.png"/>
    </Window.Background>

    <Grid>
        <Grid Margin="15,15,15,15">

            <Grid.RowDefinitions>
                <RowDefinition Height=".7*"/>
                <RowDefinition Height="5*"/>
            </Grid.RowDefinitions>

            <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="1.5*"/>
                    <ColumnDefinition Width="3*"/>
                    <ColumnDefinition Width="1.5*"/>
                </Grid.ColumnDefinitions>

                <Grid Grid.Column="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="1*"/>
                        <ColumnDefinition Width="1.5*"/>
                    </Grid.ColumnDefinitions>

                    <Button Click="Click_BtnOptions" Grid.Column="0" Content="{x:Static language:Lang.Match_Options}" Height="60" Width="100" HorizontalAlignment="Left" VerticalAlignment="Center"
                        Foreground="#FF5F0000" FontWeight="Bold"
                         BorderBrush="Transparent" FontFamily="Tw Cen MT Condensed Extra Bold" FontSize="20">
                        <Button.Background>
                            <ImageBrush ImageSource="/Resources/Images/bone2Button.png"/>
                        </Button.Background>
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border x:Name="border" Background="{TemplateBinding Background}" 
                                    CornerRadius="5" BorderThickness="0">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="border" Property="Opacity" Value="0.8"/>
                                    </Trigger>
                                    <Trigger Property="IsPressed" Value="True">
                                        <Setter TargetName="border" Property="Opacity" Value="0.6"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                    <StackPanel VerticalAlignment="Center" Grid.Column="1" HorizontalAlignment="Center">
                        <StackPanel.Background>
                            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                <GradientStop Color="#FFBA8B5C"/>
                                <GradientStop Color="#FFE5E5E5" Offset="1"/>
                            </LinearGradientBrush>
                        </StackPanel.Background>
                        <Label Content="{x:Static language:Lang.Match_TimeMatch}" FontFamily="Tw Cen MT Condensed Extra Bold" FontSize="22" Foreground="#FFFFFDFD" Background="#FF513800"/>
                        <Label Content="{Binding MatchTimeDisplay}" Name="Lb_MatchTime" FontFamily="Trebuchet MS" HorizontalAlignment="Center" FontSize="30" Foreground="#FF472100" FontWeight="Bold"/>
                    </StackPanel>
                </Grid>

                <Grid Grid.Column="1">

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="1*"/>
                        <ColumnDefinition Width="1.5*"/>
                        <ColumnDefinition Width="1*"/>
                    </Grid.ColumnDefinitions>

                    <Grid Grid.Column="0" ClipToBounds="False">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="2*"/>
                            <RowDefinition Height="1.8*"/>
                        </Grid.RowDefinitions>

                        <Grid Grid.Row="1" ClipToBounds="False">
                            <Viewbox Stretch="Uniform" ClipToBounds="False">
                                <Label Visibility="Visible"  Content="Player 2" Name="Lb_TopPlayerName" FontFamily="Trebuchet MS" Foreground="White" FontWeight="Bold"/>
                            </Viewbox>
                        </Grid>
                    </Grid>

                    <Grid Grid.Column= "1">
                        <Image Source="/Resources/Images/logo.png" Stretch="Uniform" HorizontalAlignment="Center"/>
                    </Grid>

                    <Grid Grid.Column= "2">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="1*"/>
                            <RowDefinition Height="1*"/>
                        </Grid.RowDefinitions>

                        <Grid Grid.Row="1">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="3.1*"/>
                                <ColumnDefinition Width="1*"/>
                            </Grid.ColumnDefinitions>

                            <Grid Grid.Column="1">
                                <Button Click="Click_BtnSeeDeckP2" Cursor="Hand">
                                    <Button.Background>
                                        <ImageBrush ImageSource="/Resources/Images/eye.png"/>
                                    </Button.Background>
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Border x:Name="border" Background="{TemplateBinding Background}" 
                                                CornerRadius="5" BorderThickness="0">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="border" Property="Opacity" Value="0.8"/>
                                                </Trigger>
                                                <Trigger Property="IsPressed" Value="True">
                                                    <Setter TargetName="border" Property="Opacity" Value="0.6"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                            </Grid>
                        </Grid>
                    </Grid>
                </Grid>

                <Grid Grid.Column="2">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="1.5*"/>
                        <ColumnDefinition Width="1*"/>
                    </Grid.ColumnDefinitions>

                    <Grid Grid.Column="0">
                        <StackPanel HorizontalAlignment="Center">
                            <StackPanel.Background>
                                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                    <GradientStop Color="#FFBA8B5C"/>
                                    <GradientStop Color="#FFE5E5E5" Offset="1"/>
                                </LinearGradientBrush>
                            </StackPanel.Background>
                            <Label Content="{x:Static language:Lang.Match_PlaysRemaining}" FontFamily="Tw Cen MT Condensed Extra Bold" FontSize="22" Foreground="#FFFFFDFD" Background="#FF513800" HorizontalAlignment="Stretch"/>
                            <Label Content="{Binding RemainingMoves}" Name="Lb_PlaysRemaining" FontFamily="Trebuchet MS" HorizontalAlignment="Center" FontSize="25" Foreground="#FF472100" FontWeight="Bold"/>

                            <Border Background="#44000000" CornerRadius="8" Margin="10,0,10,0" Padding="5">
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">

                                    <TextBlock Text="⏱" FontSize="10" Foreground="White" VerticalAlignment="Center" Margin="0,0,5,0">
                                        <TextBlock.Effect>
                                            <DropShadowEffect Color="Black" BlurRadius="2" ShadowDepth="1"/>
                                        </TextBlock.Effect>
                                    </TextBlock>

                                    <TextBlock Text="{Binding TurnTimeDisplay, FallbackValue='60'}" Foreground="{Binding TurnTimeColor, FallbackValue=White}" 
                                        FontFamily="Trebuchet MS" FontSize="13" FontWeight="Bold" VerticalAlignment="Center">
                                        <TextBlock.Effect>
                                            <DropShadowEffect Color="Black" BlurRadius="2" ShadowDepth="1" Opacity="0.5"/>
                                        </TextBlock.Effect>
                                    </TextBlock>

                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </Grid>

                    <Grid Grid.Column="1">
                        <Grid.Background>
                            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                <GradientStop Color="#FFBA8B5C"/>
                                <GradientStop Color="#FFE5E5E5" Offset="1"/>
                            </LinearGradientBrush>
                        </Grid.Background>
                        <StackPanel>
                            <Label Content="{x:Static language:Lang.Match_Points}" FontFamily="Tw Cen MT Condensed Extra Bold" FontSize="22" Foreground="#FFFFFDFD" Background="#FF513800" HorizontalAlignment="Stretch"/>
                            <Label Content="{Binding CurrentPoints}" Name="Lb_Points" FontFamily="Trebuchet MS" HorizontalAlignment="Center" FontSize="30" Foreground="#FF472100" FontWeight="Bold"/>
                        </StackPanel>
                    </Grid>
                </Grid>
            </Grid>

            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="1*"/>
                    <ColumnDefinition Width="2.5*"/>
                    <ColumnDefinition Width="1*"/>
                </Grid.ColumnDefinitions>

                <!-- Left Panel -->
                <Grid Grid.Column="0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="3*"/>
                        <RowDefinition Height="1.1*"/>
                    </Grid.RowDefinitions>

                    <!-- Left player -->
                    <Grid x:Name="Grid_LeftPlayer" Grid.Row="0" Margin="2" Visibility="Collapsed">

                        <Grid.RowDefinitions>
                            <RowDefinition Height="1*"/>
                            <RowDefinition Height="10*"/>
                        </Grid.RowDefinitions>

                        <!-- Left player name -->
                        <Grid Grid.Row="0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="1*"/>
                                <ColumnDefinition Width="6*"/>
                            </Grid.ColumnDefinitions>

                            <Grid Grid.Column="0">
                                <Button Click="Click_BtnSeeDeckP3" Cursor="Hand">
                                    <Button.Background>
                                        <ImageBrush ImageSource="/Resources/Images/eye.png"/>
                                    </Button.Background>
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Border x:Name="border" Background="{TemplateBinding Background}" 
                                                CornerRadius="5" BorderThickness="0">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="border" Property="Opacity" Value="0.8"/>
                                                </Trigger>
                                                <Trigger Property="IsPressed" Value="True">
                                                    <Setter TargetName="border" Property="Opacity" Value="0.6"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                            </Grid>

                            <Grid Grid.Column="1" ClipToBounds="False">
                                <Viewbox Stretch="Uniform" ClipToBounds="False">
                                    <Label Visibility="Visible" Content="Player 3" Name="Lb_LeftPlayerName" FontFamily="Trebuchet MS" Foreground="White" FontWeight="Bold"/>
                                </Viewbox>
                            </Grid>
                        </Grid>

                        <!--Left player cards -->
                        <Grid Grid.Row="1" Margin="60,5,5,5">
                            <controls:PlayerCell x:Name="LeftPlayerCell"/>
                        </Grid>

                    </Grid>

                    <Grid Grid.Row="1" Margin="5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="1*"/>
                            <ColumnDefinition Width="1.15*"/>
                        </Grid.ColumnDefinitions>

                        <!-- ChatButton -->
                        <Grid Grid.Column="0">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="1*"/>
                                <RowDefinition Height="4*"/>
                            </Grid.RowDefinitions>

                            <Grid Grid.Row="1">
                                <Button Click="Click_BtnChat" Name="Btn_Chat" Visibility="Visible" Grid.Column="0" Cursor="Hand">
                                    <Button.Background>
                                        <ImageBrush ImageSource="/Resources/Images/chatLogo.png"/>
                                    </Button.Background>
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Border x:Name="border" Background="{TemplateBinding Background}" 
                                                CornerRadius="5" BorderThickness="0">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="border" Property="Opacity" Value="0.8"/>
                                                </Trigger>
                                                <Trigger Property="IsPressed" Value="True">
                                                    <Setter TargetName="border" Property="Opacity" Value="0.6"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                            </Grid>
                        </Grid>

                        <!-- See at my deck and pass turn-->
                        <Grid Grid.Column="1">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="1.3*"/>
                                <RowDefinition Height="2*"/>
                                <RowDefinition Height="2*"/>
                            </Grid.RowDefinitions>

                            <Grid Grid.Row="0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="2.7*"/>
                                    <ColumnDefinition Width="1*"/>
                                </Grid.ColumnDefinitions>

                                <Grid Grid.Column="1">
                                    <Button Click="Click_BtnSeeDeckP1" Cursor="Hand">
                                        <Button.Background>
                                            <ImageBrush ImageSource="/Resources/Images/eye.png"/>
                                        </Button.Background>
                                        <Button.Template>
                                          <ControlTemplate TargetType="Button">
                                                <Border x:Name="border" Background="{TemplateBinding Background}" 
                                                    CornerRadius="5" BorderThickness="0">
                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter TargetName="border" Property="Opacity" Value="0.8"/>
                                                    </Trigger>
                                                    <Trigger Property="IsPressed" Value="True">
                                                        <Setter TargetName="border" Property="Opacity" Value="0.6"/>
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Button.Template>
                                    </Button>
                                </Grid>
                            </Grid>

                            <Grid Grid.Row="1">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="1*"/>
                                    <ColumnDefinition Width="5*"/>
                                </Grid.ColumnDefinitions>

                                <Grid Grid.Column="1" Margin="0,10,0,0">
                                    <Button Name="Btn_EndTurn" Click="Click_BtnEndTurn" Grid.Column="0" Content="{x:Static language:Lang.Match_PassTurn}"
                                        Foreground="White" FontWeight="Bold"
                                        BorderBrush="Transparent" FontFamily="Tw Cen MT Condensed Extra Bold" FontSize="20" Cursor="Hand">
                                        <Button.Background>
                                            <ImageBrush ImageSource="/Resources/Images/rockCancel.png"/>
                                        </Button.Background>
                                        <Button.Template>
                                            <ControlTemplate TargetType="Button">
                                                <Border x:Name="border" Background="{TemplateBinding Background}" 
                                                    CornerRadius="5" BorderThickness="0">
                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter TargetName="border" Property="Opacity" Value="0.8"/>
                                                    </Trigger>
                                                    <Trigger Property="IsPressed" Value="True">
                                                        <Setter TargetName="border" Property="Opacity" Value="0.6"/>
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Button.Template>
                                    </Button>
                                </Grid>
                            </Grid>

                        </Grid>
                    </Grid>

                    <!-- Chat  -->
                    <Grid Name="Gr_Chat" Grid.RowSpan="2" Visibility="Collapsed">

                        <Grid.RowDefinitions>
                            <RowDefinition Height="13*"/>
                            <RowDefinition Height="1.5*"/>
                        </Grid.RowDefinitions>

                        <!-- Chat -->
                        <Grid Grid.Row="0" Background="White" Opacity="0.8">

                            <Grid.RowDefinitions>
                                <RowDefinition Height="1*"/>
                                <RowDefinition Height="10*"/>
                            </Grid.RowDefinitions>

                            <!-- Close chat button -->
                            <Grid Grid.Row="0">

                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="4*"/>
                                    <ColumnDefinition Width="1*"/>
                                </Grid.ColumnDefinitions>

                                <Grid Grid.Column="1" Margin="2,2,2,2">
                                    <Button Click="Click_BtnClose">
                                        <Button.Background>
                                            <ImageBrush ImageSource="/Resources/Images/close.png"/>
                                        </Button.Background>
                                        <Button.Template>
                                            <ControlTemplate TargetType="Button">
                                                <Border x:Name="border" Background="{TemplateBinding Background}" 
                                                    CornerRadius="5" BorderThickness="0">
                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter TargetName="border" Property="Opacity" Value="0.8"/>
                                                    </Trigger>
                                                    <Trigger Property="IsPressed" Value="True">
                                                        <Setter TargetName="border" Property="Opacity" Value="0.6"/>
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Button.Template>
                                    </Button>
                                </Grid>
                            </Grid>

                            <!-- General chat -->
                            <Grid Grid.Row="1">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <!-- Mensajes del chat -->
                                <ScrollViewer Grid.Row="0" x:Name="ChatScrollViewer" VerticalScrollBarVisibility="Auto"
                                      Padding="10" Background="Transparent">
                                    <ItemsControl ItemsSource="{Binding Messages}">
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Border Background="#33000000" CornerRadius="5" Padding="8,5" Margin="0,2">
                                                    <TextBlock Text="{Binding}" TextWrapping="Wrap" Foreground="Black" FontSize="13" FontFamily="Trebuchet MS"/>
                                                </Border>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </ScrollViewer>

                                <!-- Usuarios online -->
                                <Border Grid.Row="1" Background="#22000000" Padding="8,5" Margin="10,0">
                                    <StackPanel>
                                        <TextBlock Text="Online:" FontWeight="SemiBold" FontSize="11" Foreground="#FF333333"
                                           FontFamily="Trebuchet MS" Margin="0,0,0,3"/>
                                        <ItemsControl ItemsSource="{Binding OnlineUsers}">
                                            <ItemsControl.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <WrapPanel Orientation="Horizontal"/>
                                                </ItemsPanelTemplate>
                                            </ItemsControl.ItemsPanel>
                                            <ItemsControl.ItemTemplate>
                                                <DataTemplate>
                                                    <Border Background="#FFB200FF" CornerRadius="8" Padding="6,2" Margin="0,0,4,4">
                                                        <TextBlock Text="{Binding}" Foreground="Black" FontSize="10"
                                                           FontWeight="SemiBold" FontFamily="Trebuchet MS"/>
                                                    </Border>
                                                </DataTemplate>
                                            </ItemsControl.ItemTemplate>
                                        </ItemsControl>
                                    </StackPanel>
                                </Border>
                            </Grid>

                        </Grid>

                        <!-- Write message zone -->
                        <Grid Grid.Row="1" Background="#FFD9F7FF" Opacity="0.8">
                            <TextBox x:Name="TxtB_Message" Text="{Binding MessageInput, UpdateSourceTrigger=PropertyChanged}" IsEnabled="{Binding IsConnected}" TextWrapping="Wrap" FontFamily="Trebuchet MS" 
                                    Background="#FFD9F7FF" Margin="10,0,10,0" VerticalAlignment="Center" FontSize="13" MaxLength="100" Padding="0,0,40,0">
                                <TextBox.InputBindings>
                                    <KeyBinding Key="Enter" Command="{Binding SendMessageCommand}"/>
                                </TextBox.InputBindings>
                            </TextBox>

                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Bottom" 
                                    Margin="0,0,15,5" IsHitTestVisible="False">
                                <TextBlock Text="{Binding Text.Length, ElementName=TxtB_Message}" FontSize="10" 
                                       Foreground="#FF0024AF" FontFamily="Trebuchet MS"/>
                                <TextBlock Text="/100" FontSize="10"  Foreground="#FF282828" FontFamily="Trebuchet MS"/>
                            </StackPanel>
                        </Grid>
                    </Grid>
                </Grid>

                <!-- Center panel -->
                <Grid Grid.Column="1">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="1.1*"/>
                        <RowDefinition Height="1.8*"/>
                        <RowDefinition Height="1.5*"/>
                    </Grid.RowDefinitions>

                    <!-- Top player -->
                    <Grid Grid.Row="0" Margin="5,5,5,5">

                        <!-- Top player cards-->
                        <Grid>
                            <controls:PlayerCellHorizontal x:Name="TopPlayerCards"/>
                        </Grid>
                    </Grid>

                    <!-- Center -->
                    <Grid Grid.Row="1">
                        <Grid.Background>
                            <ImageBrush ImageSource="/Resources/Images/skinDino.png"/>
                        </Grid.Background>
                        <Grid Margin="8,8,8,8">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="1*"/>
                                <ColumnDefinition Width="2*"/>
                                <ColumnDefinition Width="1*"/>
                            </Grid.ColumnDefinitions>

                            <Grid Grid.Column="0">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="1*"/>
                                    <RowDefinition Height="10*"/>
                                    <RowDefinition Height="1*"/>
                                </Grid.RowDefinitions>

                                <Grid Grid.Row="1">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="1*"/>
                                        <ColumnDefinition Width="6*"/>
                                        <ColumnDefinition Width="1*"/>
                                    </Grid.ColumnDefinitions>

                                    <Grid Grid.Column="1">
                                        <Grid Background="Black" Opacity=".7">
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="1*"/>
                                                <RowDefinition Height="2*" />
                                            </Grid.RowDefinitions>
                                            <Grid Grid.Row="0" Margin="5,5,5,5">
                                                <Image Source="/Resources/Images/logo.png" Stretch="Uniform" HorizontalAlignment="Center" />
                                            </Grid>
                                            <Grid Grid.Row="1">
                                                <Image Source="/Resources/Images/trash.png" Stretch="Uniform" HorizontalAlignment="Center" Margin="10,10,10,10"/>
                                            </Grid>
                                        </Grid>
                                        <!-- Card -->
                                        <Grid x:Name="Gr_DiscardedCards" Visibility="Collapsed" HorizontalAlignment="Center" VerticalAlignment="Center">
                                            <Button Width="100"  Height="165" Click="Click_BtnOpenDiscardPile" Cursor="Hand">
                                                <Button.Background>
                                                    <ImageBrush ImageSource="/Resources/Images/Cards/Reverse/reverse.png" Stretch="UniformToFill"/>
                                                </Button.Background>
                                                <Button.Template>
                                                    <ControlTemplate TargetType="Button">
                                                        <Border x:Name="border" Background="{TemplateBinding Background}" BorderBrush="#555" BorderThickness="1">
                                                            <Border.Effect>
                                                                <DropShadowEffect Color="Black" BlurRadius="10" ShadowDepth="3"/>
                                                            </Border.Effect>
                                                        </Border>
                                                        <ControlTemplate.Triggers>
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter TargetName="border" Property="BorderBrush" Value="#FFD700"/>
                                                                <Setter TargetName="border" Property="BorderThickness" Value="4"/>
                                                                <Setter TargetName="border" Property="Effect">
                                                                    <Setter.Value>
                                                                        <DropShadowEffect Color="#FFD700" BlurRadius="20" ShadowDepth="0"/>
                                                                    </Setter.Value>
                                                                </Setter>
                                                            </Trigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                        </Grid>
                                    </Grid>
                                </Grid>
                            </Grid>

                            <Grid Grid.Column="1">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="1*"/>
                                    <RowDefinition Height="7*"/>
                                    <RowDefinition Height="1*"/>
                                </Grid.RowDefinitions>

                                <Grid Grid.Row="1" Margin="5,5,5,5">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width=".1*"/>
                                        <ColumnDefinition Width="2*"/>
                                        <ColumnDefinition Width=".1*"/>
                                        <ColumnDefinition Width="2*"/>
                                        <ColumnDefinition Width=".1*"/>
                                        <ColumnDefinition Width="2*"/>
                                        <ColumnDefinition Width=".1*"/>
                                    </Grid.ColumnDefinitions>

                                    <Grid Grid.Column="1">
                                        <Grid Opacity=".7" Background="#FFB2E9FF">
                                            <Image Source="/Resources/Images/waterLogo.png" Stretch="Uniform" HorizontalAlignment="Center" Margin="10,10,10,10"/>
                                        </Grid>
                                        <!-- Card -->
                                        <Grid Name="Gr_SeaArchs" Grid.RowSpan="2" Visibility="{Binding WaterArmyVisibility}" Margin="10,10,10,10">
                                            <Grid.Background>
                                                <ImageBrush ImageSource="/Resources/Images/Cards/Reverse/reverse.png"/>
                                            </Grid.Background>

                                        </Grid>
                                    </Grid>

                                    <Grid Grid.Column="3">
                                        <Grid Background="#FFD5FFCB" Opacity=".7">
                                            <Image Source="/Resources/Images/sandLogo.png" Stretch="Uniform" HorizontalAlignment="Center" Margin="10,10,10,10"/>
                                        </Grid>
                                        <!-- Card -->
                                        <Grid Name="Gr_SandArchs" Grid.RowSpan="2" Visibility="{Binding SandArmyVisibility}" Margin="10,10,10,10">
                                            <Grid.Background>
                                                <ImageBrush ImageSource="/Resources/Images/Cards/Reverse/reverse.png"/>
                                            </Grid.Background>
                                        </Grid>
                                    </Grid>

                                    <Grid Grid.Column="5">
                                        <Grid Background="#FFFFC5C5" Opacity=".7">
                                            <Image Source="/Resources/Images/windLogo.png" Stretch="Uniform" HorizontalAlignment="Center" Margin="10,10,10,10"/>
                                        </Grid>
                                        <!-- Card -->
                                        <Grid Name="Gr_WindArchs" Grid.RowSpan="2" Visibility="{Binding WindArmyVisibility}" Margin="10,10,10,10">
                                            <Grid.Background>
                                                <ImageBrush ImageSource="/Resources/Images/Cards/Reverse/reverse.png"/>
                                            </Grid.Background>
                                        </Grid>
                                    </Grid>
                                </Grid>
                            </Grid>

                            <Grid Grid.Column="2">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="1*"/>
                                    <RowDefinition Height="10*"/>
                                    <RowDefinition Height="1*"/>
                                </Grid.RowDefinitions>

                                <!-- All cards -->
                                <Grid Grid.Row="1">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="1*"/>
                                        <ColumnDefinition Width="10*"/>
                                        <ColumnDefinition Width="1*"/>
                                    </Grid.ColumnDefinitions>

                                    <Grid Grid.Column="1">
                                        <Grid Background="Black" Opacity=".7">
                                            <Image Source="/Resources/Images/logo.png" Stretch="Uniform" HorizontalAlignment="Center" Margin="10,10,10,10"/>
                                        </Grid>

                                        <!-- Card -->
                                        <Grid Name="Gr_AllCards" Margin="30,20,30,20">
                                            <Button Name="Btn_TakeACard" Click="Click_BtnTakeACard" Visibility="Visible" Cursor="Hand">
                                                <Button.Background>
                                                    <ImageBrush ImageSource="/Resources/Images/Cards/Reverse/reverse.png"/>
                                                </Button.Background>
                                                <Button.Template>
                                                    <ControlTemplate TargetType="Button">
                                                        <Border x:Name="border" Background="{TemplateBinding Background}" 
                                                            CornerRadius="5" BorderThickness="0">
                                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                        </Border>
                                                        <ControlTemplate.Triggers>
                                                            <Trigger Property="IsEnabled" Value="False">
                                                                <Setter TargetName="border" Property="Opacity" Value="0.3"/>
                                                            </Trigger>
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter TargetName="border" Property="Opacity" Value="0.8"/>
                                                            </Trigger>
                                                            <Trigger Property="IsPressed" Value="True">
                                                                <Setter TargetName="border" Property="Opacity" Value="0.6"/>
                                                            </Trigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                        </Grid>

                                    </Grid>
                                </Grid>

                            </Grid>
                        </Grid>

                    </Grid>

                    <Grid Grid.Row="2">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="3.5*"/>
                            <RowDefinition Height="1.5*"/>
                        </Grid.RowDefinitions>

                        <!-- Bottom player cards -->
                        <Grid Grid.Row="0">
                            <controls:PlayerCellHorizontal x:Name="BottomPlayerCards"/>
                        </Grid>

                        <Grid Grid.Row="1" Background="Transparent" ClipToBounds="False">
                            <Canvas x:Name="MyDeckCanvas" HorizontalAlignment="Stretch" VerticalAlignment="Bottom" ClipToBounds="False"/>
                        </Grid>

                    </Grid>
                </Grid>

                <!-- Right panel -->
                <Grid Grid.Column="2" Margin="2">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="3*"/>
                        <RowDefinition Height="1.2*"/>
                    </Grid.RowDefinitions>

                    <!-- Right player -->
                    <Grid x:Name="Grid_RightPlayer" Grid.Row="0" Margin="0,0,45,0" Visibility="Collapsed">

                        <Grid.RowDefinitions>
                            <RowDefinition Height="1*"/>
                            <RowDefinition Height="10*"/>
                        </Grid.RowDefinitions>

                        <!-- Right player name -->
                        <Grid Grid.Row="0" Margin="0,0,-45,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="6*"/>
                                <ColumnDefinition Width="1*"/>
                            </Grid.ColumnDefinitions>

                            <Grid Grid.Column="0" ClipToBounds="False">
                                <Viewbox Stretch="Uniform" ClipToBounds="False">
                                    <Label Visibility="Visible" Content="Player 4" Name="Lb_RightPlayerName" FontFamily="Trebuchet MS" Foreground="White" FontWeight="Bold"/>
                                </Viewbox>
                            </Grid>
                            <Grid Grid.Column="1">
                                <Button Click="Click_BtnSeeDeckP4" Cursor="Hand">
                                    <Button.Background>
                                        <ImageBrush ImageSource="/Resources/Images/eye.png"/>
                                    </Button.Background>
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Border x:Name="border" Background="{TemplateBinding Background}" 
                                                CornerRadius="5" BorderThickness="0">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="border" Property="Opacity" Value="0.8"/>
                                                </Trigger>
                                                <Trigger Property="IsPressed" Value="True">
                                                    <Setter TargetName="border" Property="Opacity" Value="0.6"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                            </Grid>
                        </Grid>

                        <!-- Right player cards -->
                        <Grid Grid.Row="1" Margin="5">
                            <controls:PlayerCell x:Name="RightPlayerCards"/>
                        </Grid>
                    </Grid>

                    <!-- Provoke now -->
                    <Grid Grid.Row="1" Margin="20,0,20,0">
                        <Button Name="Btn_ProvokeNow" Grid.Column="0" Click="Click_BtnProvokeNow"
                            Foreground="#FFFFF900" FontWeight="Bold"
                            BorderBrush="Transparent" 
                            FontFamily="{StaticResource Volcanic Dungeon}" Cursor="Hand">

                            <Button.Background>
                                <ImageBrush ImageSource="/Resources/Images/attackNow.png"/>
                            </Button.Background>

                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border x:Name="border" Background="{TemplateBinding Background}" 
                                        CornerRadius="5" BorderThickness="0">
                                        <Viewbox>
                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Viewbox>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="border" Property="Opacity" Value="0.8"/>
                                        </Trigger>
                                        <Trigger Property="IsPressed" Value="True">
                                            <Setter TargetName="border" Property="Opacity" Value="0.6"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>

                            <TextBlock Text="{x:Static language:Lang.Match_Attack}">
                                <TextBlock.Effect>
                                    <DropShadowEffect ShadowDepth="1" BlurRadius="10" Color="Black" Opacity="1" />
                                </TextBlock.Effect>
                            </TextBlock>
                        </Button>

                    </Grid>

                </Grid>

            </Grid>

            <Grid x:Name="Gr_ErrorNotification" Grid.RowSpan="2" HorizontalAlignment="Right" VerticalAlignment="Top" Width="500" Height="70" 
                      Margin="0,150,0,0" Opacity="0.7" Visibility="Collapsed" Panel.ZIndex="999">
                <Grid.Background>
                    <LinearGradientBrush EndPoint=".5,1" StartPoint="1,0">
                        <GradientStop Color="White" Offset="0.007"/>
                        <GradientStop Color="#FFF3FF00" Offset="1"/>
                    </LinearGradientBrush>
                </Grid.Background>
                <TextBlock Name="TxtB_ErrorNotificationContainer" HorizontalAlignment="Right" VerticalAlignment="Center"
                                FontSize="18" FontFamily="Tw Cen MT Condensed Extra Bold" Margin="0,0,15,0" Foreground="#FF090400"/>
            </Grid>

        </Grid>

        <Grid x:Name="Gr_GameEndedOverlay" Visibility="Collapsed" Panel.ZIndex="2000">
            <Image Source="/Resources/Images/stopEndMatch.png"
                   HorizontalAlignment="Center" VerticalAlignment="Center" Stretch="UniformToFill"
                   RenderOptions.BitmapScalingMode="HighQuality"/>
        </Grid>  

    </Grid>

</Window>
